<h1>News Feed</h1>
<% if current_user %>
<div id="content">
<table class="feed">
  <tbody>
    <% @cards.each do |card| %>
      <tr>
      <div class="post">

        <div class="card">
          <dl>
            <%= image_tag card.poster_profile_url %>
            <dt><%= card.poster %></dt>
            <dd><%= truncate(strip_tags(card.poster_comment), :length => 140) %></dd>
          </dl>
          <dl>
            <dt><%= link_to truncate(strip_tags(card.url), :length => 80), card.url, :target => "_blank" %></dd>
          </dl>
          <dl>
            <%= image_tag card.image_url, :size => "140x140", :crop => :fill %>
            <dt><%= truncate(strip_tags(card.title), :length => 80) %></dt>
            <dd><%= truncate(strip_tags(card.description), :length => 300) %></dd>
          </dl>

          <dl>
            <dd><%=  %> votes</dd>
            <!-- dd><%= card.count_read %> People have read this article from this link</dd-->

            <%= form_for(@vote, :remote => true) do |f| %>
            <%= f.hidden_field "card_id", :value => card.id %>
            <%= f.hidden_field "user_id", :value => @user.id %>
            <div class="actions">
              <%= f.submit "Vote" %>
            </div>
            <% end %>
          </dl>

          <dl>
            <dd>Category: <%= card.category %></dd>
            <dd><%= link_to time_ago_in_words(card.updated_at) + " ago", card, :target => "_blank" %></dd>
          </dl>
        </div>
      </div>
      </tr>
    <% end %>
  </tbody>
</table>

<%= will_paginate @cards %>
<%end%>
</div>


